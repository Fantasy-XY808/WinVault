<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="WinVault.Pages.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls">

    <Page.Resources>
        <!-- 设置卡片样式 -->
        <Style x:Key="SettingCardStyle" TargetType="Grid">
            <Setter Property="Background" Value="{ThemeResource CardBackgroundFillColorDefaultBrush}"/>
            <Setter Property="BorderBrush" Value="{ThemeResource CardStrokeColorDefaultBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="16,12"/>
            <Setter Property="Margin" Value="0,0,0,12"/>
        </Style>

        <!-- 分类标题样式 -->
        <Style x:Key="CategoryTitleStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,0,0,12"/>
        </Style>

        <!-- 设置项标题样式 -->
        <Style x:Key="SettingTitleStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,0,0,4"/>
        </Style>

        <!-- 设置项描述样式 -->
        <Style x:Key="SettingDescriptionStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Foreground" Value="{ThemeResource TextFillColorSecondaryBrush}"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
        </Style>
    </Page.Resources>

    <ScrollViewer Padding="24,16">
        <StackPanel Spacing="24">
            <!-- 页面标题 -->
            <StackPanel>
                <TextBlock Text="WinVault 设置" Style="{ThemeResource TitleTextBlockStyle}" Margin="0,0,0,8"/>
                <TextBlock Text="个性化您的WinVault体验"
                          Style="{ThemeResource SubtitleTextBlockStyle}"
                          Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
            </StackPanel>



            <!-- 关于 -->
            <StackPanel>
                <TextBlock Text="关于" Style="{StaticResource CategoryTitleStyle}"/>

                <Grid Style="{StaticResource SettingCardStyle}">
                    <StackPanel Spacing="12">
                        <StackPanel Orientation="Horizontal" Spacing="12">
                            <FontIcon Glyph="&#xE946;" FontSize="32" Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>
                            <StackPanel>
                                <TextBlock Text="WinVault" FontWeight="SemiBold" FontSize="18"/>
                                <TextBlock Text="版本： Beta 1.5.0" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                            </StackPanel>
                        </StackPanel>

                        <TextBlock Text="现代化Windows系统管理平台，提供专业级系统优化、监控和维护解决方案。"
                                   TextWrapping="Wrap" Style="{StaticResource SettingDescriptionStyle}"/>

                        <StackPanel Orientation="Horizontal" Spacing="12">
                            <Button Content="检查更新" Click="CheckUpdate_Click"/>
                            <HyperlinkButton Content="GitHub" NavigateUri="https://github.com/Fantasy-XY808/WinVault"/>
                            <HyperlinkButton Content="反馈问题" NavigateUri="https://github.com/Fantasy-XY808/WinVault/issues"/>
                        </StackPanel>
                    </StackPanel>
                </Grid>
            </StackPanel>

            <!-- 界面设置 -->
            <StackPanel>
                <TextBlock Text="界面设置" Style="{StaticResource CategoryTitleStyle}"/>

                <!-- 主题设置 -->
                <Grid Style="{StaticResource SettingCardStyle}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0">
                        <TextBlock Text="应用主题" Style="{StaticResource SettingTitleStyle}"/>
                        <TextBlock Text="选择应用的外观主题" Style="{StaticResource SettingDescriptionStyle}"/>
                    </StackPanel>

                    <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                        <RadioButton x:Name="ThemeLight" Content="浅色" Checked="Theme_Checked" Tag="Light"/>
                        <RadioButton x:Name="ThemeDark" Content="深色" Checked="Theme_Checked" Tag="Dark"/>
                        <RadioButton x:Name="ThemeSystem" Content="跟随系统" Checked="Theme_Checked" Tag="Default" IsChecked="True"/>
                    </StackPanel>
                </Grid>

                <!-- 语言选择 -->
                <Grid Style="{StaticResource SettingCardStyle}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0">
                        <TextBlock Text="界面语言" Style="{StaticResource SettingTitleStyle}"/>
                        <TextBlock Text="选择应用显示语言（默认跟随系统）" Style="{StaticResource SettingDescriptionStyle}"/>
                    </StackPanel>

                    <ComboBox Grid.Column="1" x:Name="LanguageCombo" Width="200" SelectionChanged="LanguageCombo_SelectionChanged">
                        <ComboBoxItem Content="跟随系统" Tag="system"/>
                        <ComboBoxItem Content="简体中文" Tag="zh-CN"/>
                        <ComboBoxItem Content="English" Tag="en-US"/>
                    </ComboBox>
                </Grid>

                <!-- 侧边栏展开 -->
                <Grid Style="{StaticResource SettingCardStyle}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <StackPanel Grid.Column="0">
                        <TextBlock Text="侧边栏默认展开" Style="{StaticResource SettingTitleStyle}"/>
                        <TextBlock Text="控制应用启动时导航侧边栏是否展开" Style="{StaticResource SettingDescriptionStyle}"/>
                    </StackPanel>
                    <ToggleSwitch Grid.Column="1" x:Name="NavPaneToggle" Toggled="NavPaneToggle_Toggled"/>
                </Grid>

                <!-- 启动位置策略 -->
                <Grid Style="{StaticResource SettingCardStyle}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <StackPanel Grid.Column="0">
                        <TextBlock Text="窗口启动位置" Style="{StaticResource SettingTitleStyle}"/>
                        <TextBlock Text="选择每次启动时窗口出现的位置" Style="{StaticResource SettingDescriptionStyle}"/>
                    </StackPanel>
                    <ComboBox Grid.Column="1" x:Name="StartPosCombo" Width="200" SelectionChanged="StartPosCombo_SelectionChanged">
                        <ComboBoxItem Content="居中" Tag="Center"/>
                        <ComboBoxItem Content="上次位置" Tag="Last"/>
                    </ComboBox>
                </Grid>

            </StackPanel>

            <!-- 系统设置 -->
            <StackPanel>
                <TextBlock Text="系统设置" Style="{StaticResource CategoryTitleStyle}"/>

                <!-- 命令执行权限 -->
                <Grid Style="{StaticResource SettingCardStyle}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0">
                        <TextBlock Text="管理员权限执行" Style="{StaticResource SettingTitleStyle}"/>
                        <TextBlock Text="某些系统命令需要管理员权限才能执行" Style="{StaticResource SettingDescriptionStyle}"/>
                    </StackPanel>

                    <ToggleSwitch Grid.Column="1" x:Name="AdminToggle" IsOn="False" VerticalAlignment="Center" Toggled="AdminToggle_Toggled"/>
                </Grid>

                <!-- 开机自启动 -->
                <Grid Style="{StaticResource SettingCardStyle}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0">
                        <TextBlock Text="开机自启动" Style="{StaticResource SettingTitleStyle}"/>
                        <TextBlock Text="Windows启动时自动运行WinVault" Style="{StaticResource SettingDescriptionStyle}"/>
                    </StackPanel>

                    <ToggleSwitch Grid.Column="1" x:Name="StartupToggle" IsOn="False" VerticalAlignment="Center" Toggled="StartupToggle_Toggled"/>
                </Grid>

                <!-- 最小化启动 -->
                <Grid Style="{StaticResource SettingCardStyle}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0">
                        <TextBlock Text="最小化启动" Style="{StaticResource SettingTitleStyle}"/>
                        <TextBlock Text="启动时最小化到系统托盘" Style="{StaticResource SettingDescriptionStyle}"/>
                    </StackPanel>

                    <ToggleSwitch Grid.Column="1" x:Name="MinStartToggle" IsOn="False" VerticalAlignment="Center"
                                  Toggled="MinStartToggle_Toggled" IsEnabled="{Binding ElementName=StartupToggle, Path=IsOn, Mode=OneWay}"/>
                </Grid>

                <!-- 系统监控 -->
                <Grid Style="{StaticResource SettingCardStyle}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0">
                        <TextBlock Text="实时系统监控" Style="{StaticResource SettingTitleStyle}"/>
                        <TextBlock Text="在后台监控系统性能和资源使用情况" Style="{StaticResource SettingDescriptionStyle}"/>
                    </StackPanel>

                    <ToggleSwitch Grid.Column="1" x:Name="SystemMonitorToggle" IsOn="True" VerticalAlignment="Center"/>
                </Grid>

                <!-- 自动清理 -->
                <Grid Style="{StaticResource SettingCardStyle}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0">
                        <TextBlock Text="自动清理临时文件" Style="{StaticResource SettingTitleStyle}"/>
                        <TextBlock Text="定期自动清理系统临时文件和垃圾文件" Style="{StaticResource SettingDescriptionStyle}"/>
                    </StackPanel>

                    <ToggleSwitch Grid.Column="1" x:Name="AutoCleanToggle" IsOn="False" VerticalAlignment="Center"/>
                </Grid>
            </StackPanel>

            <!-- 高级设置 -->
            <StackPanel>
                <TextBlock Text="高级设置" Style="{StaticResource CategoryTitleStyle}"/>

                <!-- 调试模式 -->
                <Grid Style="{StaticResource SettingCardStyle}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0">
                        <TextBlock Text="调试模式" Style="{StaticResource SettingTitleStyle}"/>
                        <TextBlock Text="启用详细日志记录和调试信息" Style="{StaticResource SettingDescriptionStyle}"/>
                    </StackPanel>

                    <ToggleSwitch Grid.Column="1" x:Name="DebugModeToggle" IsOn="False" VerticalAlignment="Center" Toggled="DebugModeToggle_Toggled"/>
                </Grid>

                <!-- 数据收集 -->
                <Grid Style="{StaticResource SettingCardStyle}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0">
                        <TextBlock Text="匿名使用统计" Style="{StaticResource SettingTitleStyle}"/>
                        <TextBlock Text="帮助改进WinVault，发送匿名使用数据" Style="{StaticResource SettingDescriptionStyle}"/>
                    </StackPanel>

                    <ToggleSwitch Grid.Column="1" x:Name="TelemetryToggle" IsOn="True" VerticalAlignment="Center" Toggled="TelemetryToggle_Toggled"/>
                </Grid>

                <!-- 重置设置 -->
                <Grid Style="{StaticResource SettingCardStyle}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0">
                        <TextBlock Text="重置所有设置" Style="{StaticResource SettingTitleStyle}"/>
                        <TextBlock Text="将所有设置恢复为默认值" Style="{StaticResource SettingDescriptionStyle}"/>
                    </StackPanel>

                    <Button Grid.Column="1" Content="重置" VerticalAlignment="Center" Click="ResetSettings_Click"/>
                </Grid>
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</Page> 
